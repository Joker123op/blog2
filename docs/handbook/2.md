## XSS注入简介

XSS简介

* SQL注入就是将用户输入的数据被当作SQL代码执行

* XSS(前端代码注入)

前端代码（开源）三块
1. HTML：网页的框架
2. CSS：把网站变得更加好看
3. Javascript：让网页功能更强大

对于攻击者而言CSS并不重要，因为他只是美化界面，并没有安全效果

攻击的方向是js和如何触发js。因为js很强大，它可以控制浏览器

* `document.cookie="id"`(设置浏览器Cookie的js代码)
* 偷偷发送数据包(异步传输)
* 它可以窃取Cookie (先读取你的Cookie然后偷偷发送数据包给黑客，黑客收到Cookie后就可以登录你的账户)

拿到Cookie不等于拿到密码。（Cookie授权是有时效的）Cookie本身是不安全的，但是为了便捷并且利大于弊的情况下就选择了Cookie

Js的标识：
```JS
<script>alert(1)</script> // 设置了一个js弹窗

<a href=javascript:alert(1)> // 伪协议触发

<img src=1 onerror=alert(1) /> // 事件方法（触发器：事件在标签里面on开头的东西很高概率是事件）触发条件是src=1，因为这个本身不成立所以执行了后面的语句
```

上面三个不仅仅是js的标识还是触发的方法

(JavaScript事件触发手册)[https://blog.csdn.net/qq_36354324/article/details/106592588]

有的时候是缓存问题导致无法弹窗CTRL+F5就行了

事件功能非常强大，甚至可以监听键盘鼠标，左键右键，屏幕。

XSS分为三种类型：

* 反射型：你给我传参，然后触发了Js，如果你不给我传参，就不存在(传参里必须包含恶意语句才是标准的反射性XSS语句)
* 存储型：存储下来的传参，不需要传参中必须有恶意语句。但这样的脚本会被存进数据库，在这之后的所有人在访问这个网站的时候都有可能会执行你写的xss脚本(只要他存储在目标服务器)
* Dom型：

存储型的xss脚本的功能是十分强大的，如果有人在网站的数据库里打入了一个存储型的xss脚本，并且它会获取每个用户的Cookie，那么他就会有盗号等一系列的风险

反射性的xss要点击才会中招

`http://www.xxx.com/?a=<script>alert(1)</script>`这就是一个反射性xss脚本，正常人看见都觉得肯定有问题，所以就可以引入一个东西

叫做短链接，原理很简单，在百度随便一搜就大把多。可以把长链接压缩成短链接，这样就可以引导别人点击。

在实际网站中也会遇见尖括号被编码掉了导致无法注入

前端代码有一个很重要的东西是**兼容性**。会对一些东西进行包容

JavaScript还支持一些编码例如：NATIVE

弹窗函数被劫栏会尝试替代`prompt(1)`

`payload:'onfocus=alert(1)autofocus'当input输入框获取焦点时执行(onfocus)`

## Cookie同源策略

浏览器的同源策略，限制了不同源的JS，对当前页面的资源和属性的权限。同源策略保护了a.com域名下的资源不被来自其他网页的脚本读取或篡改

所谓同源是：需要同域名/端口、协议

比如
`http://www.baidu.com`

`https://www.baidu.com`

就不是同源的

Js偷Cookie就是读取本地的Cookie发送到我准备好的目标服务器上

[XSS平台](https://xssaq.com/)域名做越短越好

![Img](https://joker-1317382260.cos.ap-guangzhou.myqcloud.com/202304181445728.webp)

如果只是窃取Cookie勾选这两个就已经够了

给网站添加cookie或者更改的插件是`EditThisCookie`下载地址放这里了[跳转](https://github.com/ETCExtensions/Edit-This-Cookie/releases/tag/1.5.0)






