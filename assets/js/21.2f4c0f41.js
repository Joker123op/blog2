(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{293:function(t,s,r){"use strict";r.r(s);var _=r(14),o=Object(_.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"csrf"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#csrf"}},[t._v("#")]),t._v(" CSRF")]),t._v(" "),s("blockquote",[s("p",[t._v("CSRF跨站请求伪造：也被称为“One Click Attack”或者Seccion Riding，通常缩写为CSRF或者XSRF，是一种对网站的恶意利用。尽管听起来像跨站脚本(xss)，但是他和xss非常不同，xss利用站点内的信任用户，而CSRF攻击往往不大流行（因此对其进行防范的资源也相当稀少）和难以防范，所以被认为比xss更具危险性")])]),t._v(" "),s("blockquote",[s("p",[t._v("CSRF漏洞的成因是因为网站的cookie在浏览器中不会过期，只要不关闭浏览器或者退出登录，那以后只要是访问这个网站，都会默认你已经登录的状态。而在这个期间，攻击者发送了构造好的CSRF脚本或者包含CSRF脚本的链接，可能会执行一些用户不想做的功能(比如是添加账号等)")])]),t._v(" "),s("h4",{attrs:{id:"csrf和xss没有直接关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#csrf和xss没有直接关系"}},[t._v("#")]),t._v(" CSRF和XSS没有直接关系")]),t._v(" "),s("p",[s("code",[t._v("XSS")]),t._v("：在目标网页上执行JS来窃取 "),s("code",[t._v("Cookie")])]),t._v(" "),s("p",[s("code",[t._v("CSRF")]),t._v("：危害很大，但是条件需要配合")]),t._v(" "),s("ul",[s("li",[t._v("1、恰好登陆")]),t._v(" "),s("li",[t._v("2、登陆了")])]),t._v(" "),s("p",[t._v("生成一个CSRF攻击的html文件很简单，先在自己需要强制发送的数据包进行自己修改一下，再使用burpsutie进行抓包，然后右键")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://joker-1317382260.cos.ap-guangzhou.myqcloud.com/202304201602036.webp",alt:"Img"}})]),t._v(" "),s("p",[t._v("然后就会会生成一个html，把他保存下来就可以形成一个可以攻击的恶意CSRF")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://joker-1317382260.cos.ap-guangzhou.myqcloud.com/202304201603487.webp",alt:"Img"}})]),t._v(" "),s("h2",{attrs:{id:"cors漏洞"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cors漏洞"}},[t._v("#")]),t._v(" CORS漏洞")]),t._v(" "),s("p",[t._v("跟他同出一脉的还有一个名为 "),s("code",[t._v("CORS")]),t._v(" 的漏洞。和 "),s("code",[t._v("CSRF")]),t._v(" 有异曲同工之妙。")]),t._v(" "),s("p",[t._v("利用方法有些相似，但测试方法不一样")]),t._v(" "),s("h4",{attrs:{id:"part1-前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#part1-前言"}},[t._v("#")]),t._v(" "),s("strong",[t._v("Part1 前言")])]),t._v(" "),s("p",[t._v("CORS跨域资源共享漏洞与JSONP劫持漏洞类似，都是程序员在解决跨域问题中进行了错误的配置。攻击者可以利用Web应用对用户请求数据包的Origin头校验不严格，诱骗受害者访问攻击者制作好的恶意网站，"),s("strong",[t._v("从而跨域获取受害者的敏感数据，包括转账记录、交易记录、个人身份证号信息、订单信息等等")]),t._v("。")]),t._v(" "),s("p",[t._v("近几年在很多的渗透测试报告中，CORS跨域资源共享漏洞越来越多了。有的朋友实在挖不出漏洞，偶尔就会写上一个CORS跨域资源共享漏洞出一份报告，但是细究起来以下几个问题，却都模棱两可，搞不明白。")]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("1.")]),t._v(" 什么是CORS漏洞？")]),t._v(" "),s("p",[s("strong",[t._v("2.")]),t._v(" 哪些情况下的CORS漏洞是高危漏洞？哪些情况下CORS漏洞是没有危害的？")]),t._v(" "),s("p",[s("strong",[t._v("3.")]),t._v(" CORS漏洞的怎么利用？")]),t._v(" "),s("p",[s("strong",[t._v("4.")]),t._v(" CORS漏洞的修补建议？")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("很多朋友"),s("strong",[t._v("以为Web应用返回 "),s("code",[t._v("Access-Control-Allow-Origin: \\*")]),t._v(" 就是存在漏洞，其实这个判断是不完善的")]),t._v("。")]),t._v(" "),s("h4",{attrs:{id:"part2-cors漏洞测试结果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#part2-cors漏洞测试结果"}},[t._v("#")]),t._v(" "),s("strong",[t._v("Part2 CORS漏洞测试结果")])]),t._v(" "),s("blockquote",[s("p",[t._v("首先使用burpsuite抓包对http请求添加"),s("strong",[t._v("Origin: http://www.attacker.com")]),t._v("进行测试：")])]),t._v(" "),s("h4",{attrs:{id:"_1-如果返回头是以下情况-那么就是高危漏洞-这种情况下漏洞最好利用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-如果返回头是以下情况-那么就是高危漏洞-这种情况下漏洞最好利用"}},[t._v("#")]),t._v(" "),s("strong",[t._v("1")]),t._v("  如果返回头是以下情况，那么就是高危漏洞，这种情况下漏洞最好利用：")]),t._v(" "),s("blockquote",[s("p",[t._v("Access-Control-Allow-Origin: https://www.attacker.com")])]),t._v(" "),s("blockquote",[s("p",[t._v("Access-Control-Allow-Credentials: true")])]),t._v(" "),s("h4",{attrs:{id:"_2-如果返回头是以下情况-那么也可以认为是高危漏洞-只是利用起来麻烦一些"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-如果返回头是以下情况-那么也可以认为是高危漏洞-只是利用起来麻烦一些"}},[t._v("#")]),t._v(" "),s("strong",[t._v("2")]),t._v("  如果返回头是以下情况，那么也可以认为是高危漏洞，只是利用起来麻烦一些：")]),t._v(" "),s("blockquote",[s("p",[t._v("Access-Control-Allow-Origin: null")])]),t._v(" "),s("blockquote",[s("p",[t._v("Access-Control-Allow-Credentials: true")])]),t._v(" "),s("h4",{attrs:{id:"_3-如果返回以下-则不存在漏洞-因为null必须是小写才存在漏洞"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-如果返回以下-则不存在漏洞-因为null必须是小写才存在漏洞"}},[t._v("#")]),t._v(" "),s("strong",[t._v("3")]),t._v("  如果返回以下，则不存在漏洞，因为Null必须是小写才存在漏洞：")]),t._v(" "),s("blockquote",[s("p",[t._v("Access-Control-Allow-Origin: Null")])]),t._v(" "),s("blockquote",[s("p",[t._v("Access-Control-Allow-Credentials: true")])]),t._v(" "),s("h4",{attrs:{id:"_4-如果返回以下-可认为不存在漏洞-因为cors安全机制阻止了这种情况下的漏洞利用-也可以写上低危的cors配置错误问题。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-如果返回以下-可认为不存在漏洞-因为cors安全机制阻止了这种情况下的漏洞利用-也可以写上低危的cors配置错误问题。"}},[t._v("#")]),t._v(" "),s("strong",[t._v("4")]),t._v("  如果返回以下，可认为不存在漏洞，因为CORS安全机制阻止了这种情况下的漏洞利用，也可以写上低危的CORS配置错误问题。")]),t._v(" "),s("blockquote",[s("p",[t._v("Access-Control-Allow-Origin: *")])]),t._v(" "),s("blockquote",[s("p",[t._v("Access-Control-Allow-Credentials: true")])]),t._v(" "),s("h4",{attrs:{id:"_5-如果返回以下-可认为不存在漏洞-也可以写上低危的cors配置错误问题。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-如果返回以下-可认为不存在漏洞-也可以写上低危的cors配置错误问题。"}},[t._v("#")]),t._v(" "),s("strong",[t._v("5")]),t._v("  如果返回以下，可认为不存在漏洞，也可以写上低危的CORS配置错误问题。")]),t._v(" "),s("blockquote",[s("p",[t._v("Access-Control-Allow-Origin: *")])])])}),[],!1,null,null,null);s.default=o.exports}}]);