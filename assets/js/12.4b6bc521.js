(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{284:function(t,a,s){"use strict";s.r(a);var n=s(14),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"入侵排查思路"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#入侵排查思路"}},[t._v("#")]),t._v(" 入侵排查思路")]),t._v(" "),a("blockquote",[a("p",[t._v("账号安全 -> 历史命令 -> 检查异常端口 -> 检查异常进程 -> 检查开机启动项 -> 检查定时任务 -> 检查服务 -> 检查异常文件 -> 检查系统日志")])]),t._v(" "),a("h2",{attrs:{id:"账号安全"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#账号安全"}},[t._v("#")]),t._v(" 账号安全")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1、查询特权用户特权用户(uid 为0)\n[root@localhost ~]# awk -F: '$3==0{print $1}' /etc/passwd\n2、查询可以远程登录的帐号信息\n可以远程登陆相当于是有密码的用户\n[root@localhost ~]# awk '/\\$1|\\$6/{print $1}' /etc/shadow\n3、除root帐号外，其他帐号是否存在sudo权限。如非管理需要，普通帐号应删除sudo权限\n[root@localhost ~]# more /etc/sudoers | grep -v \"^#\\|^$\" | grep \"ALL=(ALL)\"\nmore :单页输出\ncat：一次性全部输出\n4、禁用或删除多余及可疑的帐号\nusermod -L user 禁用帐号，帐号无法登录，/etc/shadow第二栏为!开头\npasswd -l\nuserdel user 删除user用户\nuserdel -r user 将删除user用户，并且将/home目录下的user目录一并删除\n")])])]),a("h2",{attrs:{id:"历史命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#历史命令"}},[t._v("#")]),t._v(" 历史命令")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('history //查看历史命令\nhistory -c //清除历史命令\nls -a //查看隐藏文件\n\n通过.bash_history查看帐号执行过的系统命令\n\n1、root的历史命令\nhistroy\n\n2、打开/home各帐号目录下的.bash_history，查看普通帐号的历史命令\n为历史的命令增加登录的IP地址、执行命令时间等信息：\n\n1）保存1万条命令\nsed -i \'s/^HISTSIZE=1000/HISTSIZE=10000/g\' /etc/profile\n\n2）在/etc/profile的文件尾部添加如下行数配置信息：\n######jiagu history xianshi#########\nUSER_IP=`who -u am i 2>/dev/null | awk \'{print $NF}\' | sed -e \'s/[()]//g\'`\nif [ "$USER_IP" = "" ]\nthen\nUSER_IP=`hostname`\nfi\nexport HISTTIMEFORMAT="%F %T $USER_IP `whoami` "\nshopt -s histappend\nexport PROMPT_COMMAND="history -a"\n######### jiagu history xianshi ##########\n\n3）source /etc/profile让配置生效\n生成效果： 1 2018-07-10 19:45:39 192.168.204.1 root source /etc/profile\n\n3、历史操作命令的清除：history -c\n但此命令并不会清除保存在文件中的记录，因此需要手动删除.bash_profile\n文件中的记录。\n入侵排查：\n进入用户目录下\ncat .bash_history >> history.txt\n')])])]),a("h2",{attrs:{id:"检查异常端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检查异常端口"}},[t._v("#")]),t._v(" 检查异常端口")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("使用netstat 网络连接命令，分析可疑端口、IP、PID\nnetstat -antlp|more\na:all（表示所有监听的端口）\nn:直接使用IP\nt:tcp协议\nu:udp协议\nl:listen监听\np:进程\n查看下pid所对应的进程文件路径，\n运行ls -l /proc/$PID/exe或file /proc/$PID/exe（$PID 为对应的pid 号）\n")])])]),a("h2",{attrs:{id:"检查异常进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检查异常进程"}},[t._v("#")]),t._v(" 检查异常进程")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("使用ps命令，分析进程\nps aux | grep pid\nVSZ：虚拟内存的占用大小\nRSS：实际内存的占用大小\nTTY：终端类型（tty：控制终端，pts：虚拟终端）\nSTAT：进程状态\nR：正在运行或可运行的进程\n+：在前台进程组\nS：休眠中\ns：一个信息头\n<：高优先级\nN：低优先级\nl:多线程\nSTART：进程的启动时间\nTIME：进程的运行时长\nCOMMAND：启动进程的命令\n")])])]),a("h2",{attrs:{id:"检查开机启动项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检查开机启动项"}},[t._v("#")]),t._v(" 检查开机启动项")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("systemctl enable 服务名 //自启动服务\n\n开机自启动的脚本：\n#!/bin/bash\n#chkconfig:2345 10 90\n#description:ziqi.sh\necho 123\n\n2345：默认的启动级别\n查看运行级别命令runlevel\n运行级别 含义\n0 关机\n1 单用户模式，可以想象为windows的安全模式，主要用于系统修复\n2 不完全的命令行模式，不含NFS服务（无网络连接的多用户命令行模式）\n3 完全的命令行模式，就是标准字符界面（有网络连接的多用户命令行模式）\n4 系统保留\n5 图形模式\n6 重启动\n10：启动优先级\n90：停止优先级\n优先级范围：0-100，数字越大，优先级越低\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("设置开机自启动，只需将可执行脚本丢在/etc/init.d目录下，然后在\n/etc/rc.d/rc*.d中建立软链接即可\n[root@localhost ~]# ln -s /etc/init.d/sshd /etc/rc.d/rc3.d/S100ssh\n此处sshd是具体服务的脚本文件，S100ssh是其软链接，S开头代表加载时自启动；如果是K开头的脚本文\n件，代表运行级别加载时需要关闭的。\nchkconfig --add ziqi.sh //将脚本添加到自启动列表\nchkconfig --list //查看自启动列表\nchkconfig ziqi.sh on //启动脚本\n")])])]),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("硬链接")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("软链接（符号链接l）")])])]),t._v(" "),a("tbody",[a("tr",[a("td"),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("类似完整克隆，但不 完全是")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("类似链接克隆，但不完全是")])]),t._v(" "),a("tr",[a("td",[t._v("创建方式")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("ln [原文件] [目标链接 文件]")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("ln -s [原文件] [目标链接文件]")])]),t._v(" "),a("tr",[a("td",[t._v("原文件被删除")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("若有执行权限，可以 执行文件")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("随之损坏，不能执行")])]),t._v(" "),a("tr",[a("td",[t._v("更改原文件权限")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("权限随之更改")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("权限不会更改，但若原文件没有执行权 限，也无法执行")])]),t._v(" "),a("tr",[a("td",[t._v("新建一个与被删原文件同 名的文件")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("执行结果是被删原文 件的内容")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("执行结果是新建文件的内容")])])])]),t._v(" "),a("h2",{attrs:{id:"检查定时任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检查定时任务"}},[t._v("#")]),t._v(" 检查定时任务")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("入侵排查：\n重点关注以下目录中是否存在恶意脚本\n/var/spool/cron/*\n/etc/crontab\n/etc/cron.d/*\n/etc/cron.daily/*\n/etc/cron.hourly/*\n/etc/cron.monthly/*\n/etc/cron.weekly/\n/etc/anacrontab\n/var/spool/anacron/*\n")])])]),a("h2",{attrs:{id:"检查服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检查服务"}},[t._v("#")]),t._v(" 检查服务")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("systemctl list-units --type=service //查看系统正在运行的服务\nsystemctl list-units --all --type=service //查看系统中所有的服务\n")])])]),a("h2",{attrs:{id:"检查异常文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检查异常文件"}},[t._v("#")]),t._v(" 检查异常文件")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('1、查看敏感目录，如/tmp目录下的文件，同时注意隐藏文件夹，以“..”为名\n的文件夹具有隐藏属性\n\n2、得到发现WEBSHELL、远控木马的创建时间，如何找出同一时间范围内\n创建的文件？\n可以使用find命令来查找，如 find /opt -iname "*" -atime 1 -type f 找出 /opt 下一天前访问\n过的文件\n-atime 1：一天之内\n-type f：type类型为file，普通文件\n\n3、针对可疑文件可以使用stat进行创建修改时间。\n[root@os43 ~]# stat 1.txt\nAccess: //访问时间（如cat查看文件内容）\nModify: //修改文件内容的时间\nChange: //改变状态的时间（包括内容的修改、权限的修改等）\n')])])]),a("h2",{attrs:{id:"检查系统日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检查系统日志"}},[t._v("#")]),t._v(" 检查系统日志")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("日志默认存放位置：/var/log/\n查看日志配置情况：more /etc/rsyslog.conf\n日志文件 描述\n/var/log/cron 记录了系统定时任务相关的日志\n/var/log/cups 记录打印信息的日志\n/var/log/dmesg 记录了系统在开机时内核自检的信息，也可以使用dmesg命令直接查看内核自检信息\n/var/log/mailog 记录邮件信息\n★/var/log/message 记录系统重要信息的日志。这个日志文件中会记录Linux系统的绝大多数重要信息，\n如果系统出现问题时，首先要检查的就应该是这个日志文件\n/var/log/btmp 记录错误登录日志，这个文件是二进制文件，不能直接vi查看，而要使用lastb命令查看\n/var/log/lastlog 记录系统中所有用户最后一次登录时间的日志，这个文件是二进制文件，不能直接vi，\n而要使用lastlog命令查看日志文件 描述\n/var/log/wtmp 永久记录所有用户的登录、注销信息，同时记录系统的启动、重启、关机事件。同样这个文\n件也是一个二进制文件，不能直接vi，而需要使用last命令来查看\n/var/log/utmp 记录当前已经登录的用户信息，这个文件会随着用户的登录和注销不断变化，只记录当前登\n录用户的信息。同样这个文件不能直接vi，而要使用w,who,users等命令来查询\n★/var/log/secure 记录验证和授权方面的信息，只要涉及账号和密码的程序都会记录，比如SSH登录，su\n切换用户，sudo授权，甚至添加用户和修改用户密码都会记录在这个日志文件中\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('日志分析技巧：\n\n1、定位有多少IP在爆破主机的root帐号：\ngrep "Failed password for root" /var/log/secure | awk \'{print $11}\' | sort |\nuniq-c | sort -nr | more\n\n2、定位有哪些IP在爆破：\ngrep "Failed password" /var/log/secure|grep -E -o "(25[0-5]|2[0-4][0-\n9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-\n9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)"|uniq -c\n\n3、爆破用户名字典是什么？\ngrep "Failed password" /var/log/secure|perl -e \'while($_=<>){ /for(.*?) from/;\nprint "$1\\n";}\'|uniq -c|sort -nr\n\n4、登录成功的IP有哪些：\ngrep "Accepted " /var/log/secure | awk \'{print $11}\' | sort | uniq -c | sort -nr\n| more\nsort：对文本文件中所有行进行排序\nsort -nr：统计出现的次数\nuniq -c：在每行开头的时候增加重复的次数\n\ncat /var/log/secure | grep "Accepted"\n\n5、登录成功的日期、用户名、IP：\ngrep "Accepted " /var/log/secure | awk \'{print $1,$2,$3,$9,$11}\'\n\n6、增加用户日志：\ngrep "useradd" /var/log/secure\n\n7、删除用户日志：\ngrep "userdel" /var/log/secure\n\n8、su切换用户\nmore /var/log/secure | grep \'su:\'\n')])])]),a("h2",{attrs:{id:"工具使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工具使用"}},[t._v("#")]),t._v(" 工具使用")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1、chkrootkit\n网址：http://www.chkrootkit.org\n使用方法：\nwget ftp://ftp.pangeia.com.br/pub/seg/pac/chkrootkit.tar.gz\ntar -zxf chkrootkit.tar.gz\ncd chkrootkit-0.55\n./chkrootkit\n\n2、rkhunter\n网址：http://rkhunter.sourceforge.net/\n使用方法：\nwget https://sourceforge.net/projects/rkhunter/files/rkhunter/1.4.6/rkhunter1.4.6.tar.gz\ntar -zxf rkhunter-1.4.6.tar.gz\ncd rkhunter-1.4.6/\n./installer.sh -install\nrkhunter -c\n\n病毒查杀\nClamav\nClamAV的官方下载地址为：http://www.clamav.net/download.html\n使用方法：\nyum -y install epel-release\nyum install –y clamav clamav-update\nfreshclam\nclamscan -r /home\n\nwebshell查杀\n河马webshell查杀\n网址：https://www.shellpub.com/\n使用方法：\nhttps://www.shellpub.com/doc/hm_linux_usage.html\n深信服Webshell网站后门检测工具\n网址：https://edr.sangfor.com.cn/#/index/home\n")])])]),a("h2",{attrs:{id:"日志审计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志审计"}},[t._v("#")]),t._v(" 日志审计")]),t._v(" "),a("p",[t._v("日志存放的位置：/var/log")]),t._v(" "),a("h2",{attrs:{id:"日志功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志功能"}},[t._v("#")]),t._v(" 日志功能")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("用于记录系统、程序运行中发生的各种事件\n通过阅读日志，有助于诊断和解决系统故障\n")])])]),a("h2",{attrs:{id:"日志分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志分类"}},[t._v("#")]),t._v(" 日志分类")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("用户日志：添加、删除用户，改变用户状态\n程序日志：程序自带的日志，如httpd(访问日志、错误日志)\n内核及系统日志：由系统rsyslog统一管理的，日志格式基本相似\n")])])]),a("h2",{attrs:{id:"tail查看日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tail查看日志"}},[t._v("#")]),t._v(" tail查看日志")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cat、more:从头输出\ntail:从文件末尾开始输出，默认输出最后十行\n\ntail -f file.log\n# 输出文件末尾行（默认10行），当文件有追加时，会输出后续添加的行，不中断输出，除非ctrl+c中断\n# -f 即 –follow=file.log\n-f:持续输出\n\ntail -f file.log | grep “关键字”\n# 输出文件末尾包含关键字的行，当文件有追加时，会输出后续添加的行，不中断输出，除非ctrl+c中断\n# -f 即 –follow=file.log\n\ntail -n 100 file.log | grep “关键字”\n# 输出文件的后100行中包含的关键字的行（-n 100 即 –lines=100）\n-n：指定输出的行数\n\ntail -n 100 file.log | grep “关键字” -A10\n# 输出文件的后100行中包含关键字的行和该行的后10行\n\ntail -n 100 file.log | grep “关键字” -B10\n# 输出文件的后100行中包含关键字的行和该行的前10行\n\ntail -n 100 file.log | grep “关键字” –B10-A10\n# 输出文件的后100行中包含关键字的行和该行的前后10行\n")])])]),a("h2",{attrs:{id:"主要的日志文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主要的日志文件"}},[t._v("#")]),t._v(" 主要的日志文件")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("内核及公共消息日志/var/log/messages\n• /var/log/cron 计划任务日志\n• /var/log/dmesg 系统引导日志\n• /var/log/maillog 邮件系统日志\n\n用户登录日志：\n•/var/log/lastlog\n• /var/log/secure\n• /var/log/wtmp\n• /var/log/btmp\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('[root@Fricky /]# vim /etc/rsyslog.conf\n-- 进入系统内核日志文件\nauthpriv.*\n[服务名称].[日志级别]\nauthpriv：登录认证相关的服务\n*:表示所有\n数字等级越小，优先级越高，消息越重要\n日志消息的级别\n0 EMERG（紧急）：会导致主机系统不可用的情况\n1 ALERT（警告）：必须马上采取措施解决问题\n2 CRIT（严重）：比较严重的情况\n3 ERR（错误）：运行出现错误\n4 WARNING （提醒）：可能会影响系统功能的事件\n5 INFO（信息）：一般信息\n6 DEBUG（调试）：程序或系统调试信息等\n触发某级别日志：logger -p emerg "你表达的内容"\n')])])]),a("h2",{attrs:{id:"用户日志分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户日志分析"}},[t._v("#")]),t._v(" 用户日志分析")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("/var/log/lastlog：最近的用户登录事件\n/var/log/wtmp:用户登录、注销及系统开、关机事件\n/var/log/utmp：当前登录的每个用户的详细信息\n/var/log/secure：与用户验证相关的安全性事件\n")])])]),a("h4",{attrs:{id:"分析工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分析工具"}},[t._v("#")]),t._v(" 分析工具")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1.users 查看能登录的用户---/var/log/utmp\n2.who,w 查看在线登录的用户---/var/log/wtmp\n3.last,lastb 查看登录成功和失败的用户---/var/log/lastlog\nlastb：查看登录失败的日志\nlast：查看登录成功的日志\n")])])]),a("h2",{attrs:{id:"程序日志分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#程序日志分析"}},[t._v("#")]),t._v(" 程序日志分析")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum -y install httpd\n网站根目录：/var/www/html/\n日志存放位置：/var/log/httpd\n")])])]),a("h2",{attrs:{id:"日志文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志文件"}},[t._v("#")]),t._v(" 日志文件")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("/var/log/boot.log -> 包含系统启动时的日志\n/var/log/utmp -> 包含登录退出信息\n/var/log/secure -> 包含验证和授权信息\n/var/log/dpkg.log -> 包含安装或dpkg命令清除软件包的日志\n/var/log/kern.log -> 包含内核产生的日志，有助于在定制内核时解决问题\n/var/log/Xorg.x.log -> 来自X的日志信息\n/var/log/alternatives.log -> 更新替代信息都记录在这个文件中\n/var/log/cups -> 涉及所有打印信息的日志\n/var/log/anaconda.log -> 在安装Linux时，所有安装信息都储存在这个文件中\n/var/log/yum.log -> 包含使用yum安装的软件包信息\n/var/log/cron -> 每当cron进程进行一个工作，就会将相关信息记录在此文件中\n")])])]),a("h2",{attrs:{id:"日志服务器搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志服务器搭建"}},[t._v("#")]),t._v(" 日志服务器搭建")]),t._v(" "),a("blockquote",[a("p",[t._v("服务端：接收客户端的日志，保存备份")]),t._v(" "),a("p",[t._v("客户端：外发本台设备的日志")]),t._v(" "),a("p",[t._v("前提：保证两台设备能通信，确认防火墙和selinx关闭")])]),t._v(" "),a("h4",{attrs:{id:"客户端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#客户端"}},[t._v("#")]),t._v(" 客户端")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("vim /etc/rsyslog.conf\n\n*.* @@remote-host:514 //格式\n服务.级别 @@远端主机（服务端ip）：514\n@@ tcp\n@ udp\n\n配置内容如下：\nauthpriv.* @@192.168.10.100:514\n\nsystemctl restart rsyslog.service //重启服务\n")])])]),a("h4",{attrs:{id:"服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务端"}},[t._v("#")]),t._v(" 服务端")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('vim /etc/rsyslog.conf\n\n# Provides TCP syslog reception\n$ModLoad imtcp\n$InputTCPServerRun 514\n\n:fromhost-ip,isequal,"192.168.10.200"/var/log/client/192.168.10.200.log\n\n:从哪个ip去接收，包含哪些信息，"客户端IP"保存的位置/保存的日志文件名称（192.168.10.200.log）\n\nsystemctl restart rsyslog.service //重启服务\n')])])]),a("h4",{attrs:{id:"排错"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#排错"}},[t._v("#")]),t._v(" 排错")]),t._v(" "),a("blockquote",[a("p",[t._v("①确认两台设备是否能通信")]),t._v(" "),a("p",[t._v("②防火墙确认是否关闭")])])])}),[],!1,null,null,null);a.default=e.exports}}]);