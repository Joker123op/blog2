(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{302:function(a,t,s){"use strict";s.r(t);var e=s(14),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("blockquote",[t("p",[a._v("内网渗透的第一步：内网信息收集")])]),a._v(" "),t("h2",{attrs:{id:"判断网络环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#判断网络环境"}},[a._v("#")]),a._v(" 判断网络环境")]),a._v(" "),t("h4",{attrs:{id:"whoami"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#whoami"}},[a._v("#")]),a._v(" whoami")]),a._v(" "),t("h4",{attrs:{id:"whomai-user"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#whomai-user"}},[a._v("#")]),a._v(" whomai /user")]),a._v(" "),t("blockquote",[t("p",[a._v("1000：+ 普通用户")]),a._v(" "),t("p",[a._v("500：administrator")]),a._v(" "),t("p",[a._v("516：域控")]),a._v(" "),t("p",[a._v("501：guest")]),a._v(" "),t("p",[a._v("544：域管理员")])]),a._v(" "),t("h3",{attrs:{id:"net"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#net"}},[a._v("#")]),a._v(" net")]),a._v(" "),t("div",{staticClass:"language-cmd extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("net localgroup \t\t\t\t\t\t\t  # 查看当前所有用户组\n\nnet localgroup Administartors\t\t\t  # 查看指定用户组下的所有用户\n\nnet localgroup Administrators '用户名' /add\t# 直接将某一个用户添加到某一个组中 \n")])])]),t("h4",{attrs:{id:"net-share"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#net-share"}},[a._v("#")]),a._v(" net share")]),a._v(" "),t("blockquote",[t("p",[a._v("一般用于内网传播木马")])]),a._v(" "),t("h4",{attrs:{id:"net-user"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#net-user"}},[a._v("#")]),a._v(" net user")]),a._v(" "),t("div",{staticClass:"language-cmd extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("net user '用户名' '密码' /add\n")])])]),t("h4",{attrs:{id:"arp-a"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#arp-a"}},[a._v("#")]),a._v(" arp -a")]),a._v(" "),t("p",[a._v("查看当前主机的arp缓存表")]),a._v(" "),t("h2",{attrs:{id:"通过ttl初步判断操作系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过ttl初步判断操作系统"}},[a._v("#")]),a._v(" 通过TTL初步判断操作系统")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("操作系统")]),a._v(" "),t("th",[a._v("TTL")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("Windows NT/2000")]),a._v(" "),t("td",[a._v("128")])]),a._v(" "),t("tr",[t("td",[a._v("Windows 95/98")]),a._v(" "),t("td",[a._v("32")])]),a._v(" "),t("tr",[t("td",[a._v("unix")]),a._v(" "),t("td",[a._v("255")])]),a._v(" "),t("tr",[t("td",[a._v("linux")]),a._v(" "),t("td",[a._v("64")])]),a._v(" "),t("tr",[t("td",[a._v("Windows 7")]),a._v(" "),t("td",[a._v("64")])])])]),a._v(" "),t("h2",{attrs:{id:"存活主机探测"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#存活主机探测"}},[a._v("#")]),a._v(" 存活主机探测")]),a._v(" "),t("p",[a._v("条件是防火墙没开，基本上不会使用")]),a._v(" "),t("div",{staticClass:"language-cmd extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("for /1 %i in (1,1,254) do @ping -n 1 -w 1 192.168.1.%i \n")])])]),t("h4",{attrs:{id:"一把梭的操作-不常用-没鸟用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一把梭的操作-不常用-没鸟用"}},[a._v("#")]),a._v(" 一把梭的操作（不常用（没鸟用））")]),a._v(" "),t("div",{staticClass:"language-cmd extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("@echo off\nwhoami\narp -a\nnet user net localgroup\npause\n")])])]),t("blockquote",[t("p",[t("code",[a._v("route print")])])]),a._v(" "),t("h1",{attrs:{id:"隧道"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#隧道"}},[a._v("#")]),a._v(" 隧道")]),a._v(" "),t("h2",{attrs:{id:"反弹shell"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#反弹shell"}},[a._v("#")]),a._v(" 反弹shell")]),a._v(" "),t("blockquote",[t("p",[t("code",[a._v("webshell")]),a._v("的定义：web下的执行环境")])]),a._v(" "),t("p",[a._v("攻下了一台机器，开放了一个端口就会有")]),a._v(" "),t("p",[a._v("正向连接：攻击者连接目标")]),a._v(" "),t("h4",{attrs:{id:"正向不可用的情况"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#正向不可用的情况"}},[a._v("#")]),a._v(" 正向不可用的情况")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("客户不一定中了我的马")])]),a._v(" "),t("li",[t("p",[a._v("防火墙的限制，目标只能出，不能入")])]),a._v(" "),t("li",[t("p",[a._v("病毒、木马、受害者什么时候去执行、网络环境，都是未知的")])])]),a._v(" "),t("p",[a._v("所以引入了一个反弹shell的概念")]),a._v(" "),t("p",[a._v("攻击者去连接我们的服务器")]),a._v(" "),t("h2",{attrs:{id:"nc-netcat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nc-netcat"}},[a._v("#")]),a._v(" nc（netcat）")]),a._v(" "),t("p",[a._v("网络工具中的大保健，收发包")]),a._v(" "),t("p",[a._v("一些参数")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("-l listen 监听\n-vv 详情信息\n-p port端口\n-n 以ip的形式去连接地址\n-c| -e 执行命令（危险参数）\n")])])]),t("p",[a._v("使用方法")]),a._v(" "),t("blockquote",[t("p",[t("code",[a._v("nc -lvvp 1234")])])]),a._v(" "),t("p",[a._v("监听1234的端口，然后再client端输入serverIP + 监听端口")]),a._v(" "),t("h4",{attrs:{id:"安装方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装方法"}},[a._v("#")]),a._v(" 安装方法")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("yum list glibc*\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://sourceforge.NET/projects/netcat/files/netcat/0.7.1/netcat-0.7.1.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" zxvf netcat-0.7.1.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" netcat-0.7.1\n./configure\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])])]),t("p",[a._v("测试了好像不太行？")]),a._v(" "),t("h4",{attrs:{id:"服务端连接方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务端连接方法"}},[a._v("#")]),a._v(" 服务端连接方法")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("nc")]),a._v(" serverip proy\n")])])]),t("h2",{attrs:{id:"隧道-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#隧道-2"}},[a._v("#")]),a._v(" 隧道")]),a._v(" "),t("p",[a._v("在服务器的内网的时候，别人的服务器往往不可能存在一些我们需要的扫描工具，这个给时候就得使用隧道来进入对方的内网。")]),a._v(" "),t("p",[a._v("搭建隧道的前提要先判断对方的出网、入网情况")]),a._v(" "),t("h3",{attrs:{id:"隧道的种类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#隧道的种类"}},[a._v("#")]),a._v(" 隧道的种类")]),a._v(" "),t("p",[a._v("有交互就能搭建隧道")]),a._v(" "),t("blockquote",[t("p",[a._v("应用层："),t("code",[a._v("HTTP")]),a._v("、"),t("code",[a._v("HTTPS")]),a._v("、"),t("code",[a._v("DNS")]),a._v("、"),t("code",[a._v("SSH")])]),a._v(" "),t("p",[a._v("传输层："),t("code",[a._v("TCP")]),a._v("、"),t("code",[a._v("UDP")])]),a._v(" "),t("p",[a._v("网络层："),t("code",[a._v("ICMP")]),a._v("、"),t("code",[a._v("GRE")])])]),a._v(" "),t("p",[a._v("什么是有交互，哪怕是ping也可以算是一种交互的过程。")]),a._v(" "),t("h3",{attrs:{id:"判断网络连通性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#判断网络连通性"}},[a._v("#")]),a._v(" 判断网络连通性")]),a._v(" "),t("p",[a._v("防火墙")]),a._v(" "),t("blockquote",[t("p",[a._v("ICMP："),t("code",[a._v("ping")]),a._v(" 能ping通就能搭建隧道")]),a._v(" "),t("p",[a._v("HTTP："),t("code",[a._v("wget")]),a._v("、"),t("code",[a._v("curl")])]),a._v(" "),t("p",[a._v("TCP、"),t("code",[a._v("UDP：nc-zv")]),a._v(" / "),t("code",[a._v("nc -zvu")])]),a._v(" "),t("p",[a._v("DNS："),t("code",[a._v("nslookup")]),a._v("、"),t("code",[a._v("dig")])])]),a._v(" "),t("h2",{attrs:{id:"icmp隧道搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#icmp隧道搭建"}},[a._v("#")]),a._v(" ICMP隧道搭建")]),a._v(" "),t("p",[a._v("防火墙如果没有开放任何端口号的情况下依旧可以使用ICMP进行搭建隧道")]),a._v(" "),t("p",[a._v("两个工具")]),a._v(" "),t("h3",{attrs:{id:"pingtunnel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pingtunnel"}},[a._v("#")]),a._v(" Pingtunnel")]),a._v(" "),t("h4",{attrs:{id:"通用参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通用参数"}},[a._v("#")]),a._v(" 通用参数")]),a._v(" "),t("blockquote",[t("p",[a._v("type：client | server")]),a._v(" "),t("p",[a._v("key：密钥")]),a._v(" "),t("p",[a._v("nolog：不保留日志")])]),a._v(" "),t("h4",{attrs:{id:"client参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#client参数"}},[a._v("#")]),a._v(" client参数")]),a._v(" "),t("blockquote",[t("p",[a._v("-l：本地端口，发送到本地端口的流量都会被转发")]),a._v(" "),t("p",[a._v("-s：服务器地址ip")]),a._v(" "),t("p",[a._v("-t：目的地址，服务器地址 + 端口")]),a._v(" "),t("p",[a._v("-tcp：是否转发tcp 默认为0")])]),a._v(" "),t("p",[t("code",[a._v("server")]),a._v("端使用方法")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("pingtunnel "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-type")]),a._v(" server "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-key")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1234")]),a._v("\n")])])]),t("p",[t("code",[a._v("client")]),a._v("端使用方法")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("pingtunnel "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-type")]),a._v(" client "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-key")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1234")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" x.x.x.x "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" :777 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" serverIP:proy "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-tcp")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("p",[a._v("初步测试两条隧道的联通没有问题之后就可以加上一个参数，使在shell端的log全部隐藏到后台")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" pingtunnel "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-type")]),a._v(" server "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-key")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1234")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" pingtunnel "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-type")]),a._v(" client "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-key")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1234")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" x.x.x.x "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" :777 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" serverIP:proy "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-tcp")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n")])])]),t("h3",{attrs:{id:"icmpsh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#icmpsh"}},[a._v("#")]),a._v(" ICMPSH")])])}),[],!1,null,null,null);t.default=r.exports}}]);